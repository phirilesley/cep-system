@model CitizenEngagementPortal.Web.Models.ViewModel.Issues.CreateIssueViewModel
@{
    ViewData["Title"] = "Report New Issue";
}

<div class="page-header">
    <div>
        <h1 class="page-title">Report a new community issue</h1>
        <p class="page-subtitle">Share the details we need to mobilize the right teams quickly. Photos, precise locations, and context help accelerate resolutions.</p>
    </div>
    <div class="page-actions">
        <a asp-controller="Dashboard" asp-action="Index" class="btn btn-soft-light">
            <i class="fas fa-arrow-left me-2"></i>Back to dashboard
        </a>
    </div>
</div>

<div class="form-card card">
    <div class="card-header border-0">
        <div class="d-flex flex-wrap justify-content-between align-items-start gap-3">
            <div>
                <span class="badge-soft text-uppercase">Issue intake</span>
                <h2 class="h3 text-white mt-2 mb-2">Tell us what&apos;s happening</h2>
                <p class="text-white-50 mb-0">Provide as much context as possible so city teams can triage and respond without delay.</p>
            </div>
        </div>
    </div>
    <div class="card-body">
        <form asp-action="Create" method="post" enctype="multipart/form-data" class="row g-4">
            <div class="col-12">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            </div>

            <div class="col-md-6">
                <label asp-for="Title" class="form-label fw-semibold">Issue title</label>
                <input asp-for="Title" class="form-control" placeholder="Brief description of the issue" />
                <span asp-validation-for="Title" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="CategoryId" class="form-label fw-semibold">Category</label>
                <select asp-for="CategoryId" asp-items="@(new SelectList(Model.Categories, "Id", "Name"))" class="form-select">
                    <option value="">Select a category</option>
                </select>
                <span asp-validation-for="CategoryId" class="text-danger"></span>
            </div>

            <div class="col-12">
                <label asp-for="Description" class="form-label fw-semibold">Description</label>
                <textarea asp-for="Description" class="form-control" rows="4" placeholder="Share detailed information about the issue..."></textarea>
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>

            <div class="col-md-6">
                <label asp-for="Location" class="form-label fw-semibold">Location</label>
                <input asp-for="Location" class="form-control" placeholder="Enter the address or location" />
                <span asp-validation-for="Location" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="Priority" class="form-label fw-semibold">Priority</label>
                <select asp-for="Priority" class="form-select">
                    <option value="@Priority.Low">Low</option>
                    <option value="@Priority.Medium" selected>Medium</option>
                    <option value="@Priority.High">High</option>
                    <option value="@Priority.Urgent">Urgent</option>
                </select>
                <span asp-validation-for="Priority" class="text-danger"></span>
            </div>

            <div class="col-md-6">
                <label asp-for="Latitude" class="form-label fw-semibold">Latitude</label>
                <input asp-for="Latitude" class="form-control" placeholder="Latitude (optional)" type="number" step="any" />
                <span asp-validation-for="Latitude" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="Longitude" class="form-label fw-semibold">Longitude</label>
                <input asp-for="Longitude" class="form-control" placeholder="Longitude (optional)" type="number" step="any" />
                <span asp-validation-for="Longitude" class="text-danger"></span>
            </div>

            <div class="col-12">
                <label asp-for="MediaFiles" class="form-label fw-semibold">Attach photos or videos</label>
                <input asp-for="MediaFiles" class="form-control" type="file" multiple accept="image/*,video/*" />
                <div class="form-text text-white-50">You can upload multiple files to give responders more context.</div>
                <span asp-validation-for="MediaFiles" class="text-danger"></span>
            </div>

            <div class="col-12 d-flex justify-content-between align-items-center flex-wrap gap-3 pt-3">
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-soft-light px-4">
                    Cancel
                </a>
                <button type="submit" class="btn btn-primary btn-lg px-4">
                    <i class="fas fa-paper-plane me-2"></i>Submit issue
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
